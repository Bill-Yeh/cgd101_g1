<!DOCTYPE html>
<html lang="en">
<head>
    @@include('layout/meta.html', {
        "title" : "N5會話"
    })
</head>
<body class="elementary_conversation">
    <!-- header -->
    @@include('layout/header.html')
    @@include('layout/login_register.html')
    <!-- header end -->
    <section class="bigMap">  
        <div class="studyMap_map dialoguelv1" id="backGroundImg">
            <!-- 人物角色 -->
            <div class="studyMap_npc hello left hover_hello studymap_hat" id="sanHello">
                <img src="./images/studyMap_NPC_hello.png" id="hello" class="npc-img">
            </div>
            <div class="studyMap_npc hi right hover_hi" id="sanHi">
                <img src="./images/studyMap_NPC_hi.png" id="hi" class="npc-img">
            </div>
            <div class="studyMap_npc fine right hover_fine" id="sanFine">
                <img src="./images/studyMap_NPC_morning.png" id="fine" class="npc-img">
            </div>
            <div class="studyMap_npc nice left hover_nice" id="sanNice">
                <img src="./images/studyMap_NPC_afternoon.png" id="nice" class="npc-img">
            </div>
            <div class="studyMap_npc great right hover_great" id="sanGreat">
                <img src="./images/studyMap_NPC_night.png" id="great" class="npc-img">
            </div>
            <!-- 圖像框 -->
            <div class="studyMap_main_dialo" id="mapMain">
                <p id="main_text"></p>
            </div>
            <!-- 對話框 -->
            <div class="studyMap_con" id="mapCon">
                <p id="con"></p>
                <div class="fix-item">
                    <div id="sound">
                        <img  src="./images/icon_speaker.png">
                    </div>
                    <audio id="voice">
                    <source = src="" type="audio/mp3">
                    </audio>
                    <div class="npc-pic">
                        <img id="pic" src="">
                    </div>
                </div>
            </div>
        </div>
        <!-- 背景濾鏡 -->
        <div class="studyMap_fliter" id="mapFliter"></div>
        <div class="quit" id="close"></div>
        <!-- 前往測驗對話框 -->
        <div class="go-to-test" id="toTest">
            <div class="ask">
                <p>前往測驗</p>
            </div>
            <div class="yes" id="Yes">
                <button>確認</button>
            </div>
            <div class="no" id="No">
                <button>先不要</button>
            </div>
        </div>
         <!-- 木板告示 -->
        <div class="item">
            <img src="./images/studyMap_guide3.png">
        </div>
        <!-- 青蛙 -->
        <div class="fogy" id="foggy">
            <img src="./images/home_red_frog_2.gif">
        </div>
        <!-- 太陽 -->
        <div class="sunny" id="sunnyFace">
            <img src="./images/sun.png">
        </div>
        <!-- 月亮 -->
        <div class="moon" id="moonFace">
            <img src="./images/moon.png">
        </div>
        <!-- 夜晚濾鏡 -->
        <div class="night_fliter" id="nightFliter"></div>
    </section>
        <script>
            //==========對話招呼============
            let startCon = new Array('你好，來學習打招呼吧!','我是時間管理大師，I want to know，你行不行?','初次見面，我是顏色大師，學習顏色怎麼說吧!','嘿嘿嘿，我是え...一起來學...50音え段...','我是お~今天一起來學習50音的母音お段~~' );
             //==========對話框人像============
            let npcSrc = new Array('./images/studyMap_NPC_hello.png','./images/studyMap_NPC_hi.png','./images/studyMap_NPC_morning.png','./images/studyMap_NPC_afternoon.png','./images/studyMap_NPC_night.png' );
             //==========對話============
            let helloCon = new Array("「はじめまして」初次見面，發音為「ha-ji-me-ma-shi-te」","再來是「おはよう」早安，發音為「o-ha-you」","再來是「こにちは」午安，發音為「ko-ni-chi-wa」","再來是「こんばんは」晚安(晚上招呼)，發音為「kon-ban-wa」","再來是「おやすみなさい」晚安(睡前)，發音為「o-ya-su-mi-na-sai」","再來是「ありがとうございます」謝謝，發音為「a-ri-ga-dou-go-zai-ma-su」","再來是「すみません」不好意思，發音為「su-mi-ma-sen」","再來是「おねがいします」拜託，發音為「o-ne-gai-i-shi-ma-su」","再來是「さよなら」再見(拜拜)，發音為「sa-yo-na-ra」");//9
            let timeCon = new Array("「おととい」前天，發音為「ototoi」","「きのう」昨天，發音為「kinou」","「きょう」今天，發音為「kyou」","「あした」明天，發音為「ashita」","「あさって」後天，發音為「asa-te」","「にちようび」星期日，發音為「nichiyoubi」","「げつようび」星期一，發音為「getsuyoubi」","「かようび」星期二，發音為「kayoubi」","「すいようび」星期三，發音為「suiyoubi」","「もくようび」星期四，發音為「mokuyoubi」","「きんようび」星期五，發音為「kinyoubi」","「どようび」星期六，發音為「doyoubi」");
            let colorCon = new Array("首先教學的是「しろ」白色，發音為「shiro」","再來是「くろ」黑色，發音為「kuro」","再來是「あか」紅色，發音為「aka」","再來是「あお」藍色，發音為「ao」","再來是「きいろ」黃色，發音為「kiiro」","再來是「ちゃいろ」棕色，發音為「chairo」","再來是「みどり」綠色，發音為「midori」","再來是「むらさき」紫色，發音為「murasaki」","再來是「きんいろ」金色，發音為「kiniro」","再來是「ぎんいろ」銀色，發音為「giniro」");
            let eCon = new Array("首先...「え」發音為「e」...","...「け」白色，發音為「ke」...","...「せ」，發音為「se」...","...「て」，發音為「te」...","...「ね」，發音為「ne」...","...「へ」，發音為「he」...","...「め」，發音為「me」...","...「れ」，發音為「re」...");
            let oCon = new Array("首先教學的是「お」發音為「o」","再來是「こ，發音為「ko」","再來是「そ」，發音為「so」","再來是「と」，發音為「to」","再來是「の」，發音為「no」","再來是「ほ」，發音為「ho」","再來是「も」，發音為「mo」","再來是「よ」，發音為「yo」","再來是「ろ」，發音為「ro」","再來是「を」，發音為「wo」","最後一個是鼻音「ん」，發音為「n」");
            //===========聲音檔路徑===========
            let soundSrcHello = new Array("./sound/nicetomeetu.mp3","./sound/goodmoring.mp3","./sound/goodafternoon.mp3","./sound/goodnight.mp3","./sound/goodnight2.mp3","./sound/thanks.mp3","./sound/sorry.mp3","./sound/please.mp3","./sound/byebye.mp3",);
            let soundSrcTime = new Array("./sound/tdby.mp3","./sound/yesterday.mp3","./sound/today.mp3","./sound/tomorrow.mp3","./sound/tdat.mp3","./sound/sunday.mp3","./sound/monday.mp3","./sound/tuesday.mp3","./sound/wendsday.mp3","./sound/thursday.mp3","./sound/friday.mp3","./sound/saturnday.mp3");
            let soundSrcColor = new Array("./sound/white.mp3","./sound/black.mp3","./sound/red.mp3","./sound/blue.mp3","./sound/yellow.mp3","./sound/brown.mp3","./sound/green.mp3","./sound/purple.mp3","./sound/gold.mp3","./sound/silver.mp3");
            let soundSrcE = new Array("./sound/e.mp3","./sound/ke.mp3","./sound/se.mp3","./sound/te.mp3","./sound/ne.mp3","./sound/he.mp3","./sound/me.mp3","./sound/re.mp3");
            let soundSrcO = new Array("./sound/o.mp3","./sound/ko.mp3","./sound/so.mp3","./sound/to.mp3","./sound/no.mp3","./sound/ho.mp3","./sound/mo.mp3","./sound/yo.mp3","./sound/ro.mp3","./sound/wo.mp3","./sound/n.mp3");
             //==========圖像框文字=======
            let fifityWordHello = new Array("初めまして","おはよう","こんにちは","今晩は","お休みなさい","ありがとうございます","すみません","お願いします","さようなら");//9
            let fifityWordTime = new Array("./images/studyMap_tdby.svg","./images/studyMap_yesterday.svg","./images/studyMap_today.svg","./images/studyMap_tomorrow.svg","./images/studyMap_tdat.svg","./images/studyMap_sunday.svg","./images/studyMap_monday.svg","./images/studyMap_tuseday.svg","./images/studyMap_wendsday.svg","./images/studyMap_thursday.svg","./images/studyMap_friday.svg","./images/studyMap_saturnday.svg");//12
            let fifityWordColor = new Array("./images/studyMap_white.svg","./images/studyMap_black.svg","./images/studyMap_red.svg","./images/studyMap_blue.svg","./images/studyMap_yellow.svg","./images/studyMap_brown.svg","./images/studyMap_green.svg","./images/studyMap_purple.svg","./images/studyMap_gold.svg","./images/studyMap_silver.svg");//10
            let fifityWordE = new Array("./images/studyMap_e.svg","./images/studyMap_ke.svg","./images/studyMap_se.svg","./images/studyMap_te.svg","./images/studyMap_ne.svg","./images/studyMap_he.svg","./images/studyMap_me.svg","./images/studyMap_re.svg");//8
            let fifityWordO = new Array("./images/studyMap_o.svg","./images/studyMap_ko.svg","./images/studyMap_so.svg","./images/studyMap_to.svg","./images/studyMap_no.svg","./images/studyMap_ho.svg","./images/studyMap_mo.svg","./images/studyMap_yo.svg","./images/studyMap_ro.svg","./images/studyMap_wo.svg","./images/studyMap_n.svg");//11
            //===========================
            let show = document.getElementById('mapCon');
            let speaker = document.getElementById('sound');
            let photo = document.getElementById('mapMain');
            let text = document.getElementById('main_text');
            let con = document.getElementById('con');
            let sound = document.getElementById('voice');
            let test = document.getElementById('toTest');
            let filter = document.getElementById('mapFliter');
            let closeBox = document.getElementById('close');
            let pic = document.getElementById('pic');
            //npc==================
            let hello = document.getElementById('hello');
            let hi = document.getElementById('hi');
            let fine = document.getElementById('fine');
            let nice = document.getElementById('nice');
            let great = document.getElementById('great');

        function showLightBox(e){
            filter.style.display='block';
            show.style.display ='flex';
            closeBox.style.display='block';
            hello.style.display="none";
            hi.style.display="none";
            fine.style.display="none";
            nice.style.display="none";
            great.style.display="none";
            npcHello.classList.remove("studymap_hat");
            npcHi.classList.remove("studymap_hat");
            npcFine.classList.remove("studymap_hat");
            npcNice.classList.remove("studymap_hat");
            npcGreat.classList.remove("studymap_hat");
            let target = e.target.getAttribute('id');
                if(target =='hello'){
                    con.innerText = startCon[0];
                    pic.src = npcSrc[0];
                }else if(target =='hi'){
                    con.innerText = startCon[1];
                    pic.src = npcSrc[1];
                }else if(target =='fine'){
                    con.innerText = startCon[2];
                    pic.src = npcSrc[2];
                }else if(target =='nice'){
                    con.innerText = startCon[3];
                    pic.src = npcSrc[3];
                }else if(target =='great'){
                    con.innerText = startCon[4];
                    pic.src = npcSrc[4];
                }
        }
        function conversation(){
            speaker.style.display='flex';
            photo.style.display='flex';
            let temp = show.innerText.trim();
            //招呼對話
            if(temp == startCon[0]){
                con.innerText = helloCon[0];
                sound.src = soundSrcHello[0];
                text.innerText=fifityWordHello[0];
            }else if(temp == helloCon[0]){
                con.innerText = helloCon[1];
                sound.src = soundSrcHello[1];
                text.innerText=fifityWordHello[1];
            }else if(temp == helloCon[1]){
                con.innerText = helloCon[2];
                sound.src = soundSrcHello[2];
                text.innerText=fifityWordHello[2];
            }else if(temp == helloCon[2]){
                con.innerText = helloCon[3];
                sound.src = soundSrcHello[3];
                text.innerText=fifityWordHello[3];
            }else if(temp == helloCon[3]){
                con.innerText = helloCon[4];
                sound.src = soundSrcHello[4];
                text.innerText=fifityWordHello[4];
            }else if(temp == helloCon[4]){
                con.innerText = helloCon[5];
                sound.src = soundSrcHello[5];
                text.innerText=fifityWordHello[5];
            }else if(temp == helloCon[5]){
                con.innerText = helloCon[6];
                sound.src = soundSrcHello[6];
                text.innerText=fifityWordHello[6];
            }else if(temp == helloCon[6]){
                con.innerText = helloCon[7];
                sound.src = soundSrcHello[7];
                text.innerText=fifityWordHello[7];
            }else if(temp == helloCon[7]){
                con.innerText = helloCon[8];
                sound.src = soundSrcHello[8];
                text.innerText=fifityWordHello[8];
            }else if(temp == helloCon[8]){
                con.innerText = helloCon[0];
                sound.src = soundSrcHello[0];
                text.innerText="";
                show.style.display ='none';
                speaker.style.display='none';
                photo.style.display='none';
                closeBox.style.display='none';
                test.style.display='flex';
                let xhr = new XMLHttpRequest();
                xhr.onload=()=>{
                // alert(xhr.responseText);
                };
                let url = "./N5_dialouge_lesson_record_hello.php?lesson_id=11"
                xhr.open("get", url, true);
                xhr.send(null);
            }
            //待更改
            else if(temp == startCon[1]){
                con.innerText = timeCon[0];
                sound.src = soundSrcTime[0];
                text.innerText=fifityWordHello[0];
            }else if(temp == timeCon[0]){
                con.innerText = timeCon[1];
                sound.src = soundSrcTime[1];
                text.innerText=fifityWordHello[0];
            }else if(temp == timeCon[1]){
                con.innerText = timeCon[2];
                sound.src = soundSrcTime[2];
                text.innerText=fifityWordHello[0];
            }else if(temp == timeCon[2]){
                con.innerText = timeCon[3];
                sound.src = soundSrcTime[3];
                text.innerText=fifityWordHello[0];
            }else if(temp == timeCon[3]){
                con.innerText = timeCon[4];
                sound.src = soundSrcTime[4];
                text.innerText=fifityWordHello[0];
            }else if(temp == timeCon[4]){
                con.innerText = timeCon[5];
                sound.src = soundSrcTime[5];
                text.innerText=fifityWordHello[0];
            }else if(temp == timeCon[5]){
                con.innerText = timeCon[6];
                sound.src = soundSrcTime[6];
                text.innerText=fifityWordHello[0];
            }else if(temp == timeCon[6]){
                con.innerText = timeCon[7];
                sound.src = soundSrcTime[7];
                text.innerText=fifityWordHello[0];
            }else if(temp == timeCon[7]){
                con.innerText = timeCon[8];
                sound.src = soundSrcTime[8];
                text.innerText=fifityWordHello[0];
            }else if(temp == timeCon[8]){
                con.innerText = timeCon[9];
                sound.src = soundSrcTime[9];
                text.innerText=fifityWordHello[0];
            }else if(temp == timeCon[9]){
                con.innerText = timeCon[10];
                sound.src = soundSrcTime[10];
                text.innerText=fifityWordHello[0];
            }else if(temp == timeCon[10]){
                con.innerText = timeCon[11];
                sound.src = soundSrcTime[11];
                text.innerText=fifityWordHello[0];
            }else if(temp == timeCon[11]){
                con.innerText = timeCon[0];
                sound.src = soundSrcTime[0];
                text.innerText="";
                show.style.display ='none';
                speaker.style.display='none';
                photo.style.display='none';
                closeBox.style.display='none';
                test.style.display='flex';
                let xhr = new XMLHttpRequest();
                xhr.onload=()=>{
                // alert(xhr.responseText);
                };
                let url = "./N5_dialouge_lesson_record_hi.php?lesson_id=12"
                xhr.open("get", url, true);
                xhr.send(null);
            }
            //待更新
            else if(temp == startCon[2]){
                con.innerText = colorCon[0];
                sound.src = soundSrcColor[0];
                text.innerText=fifityWordHello[0];
            }else if(temp == colorCon[0]){
                con.innerText = colorCon[1];
                sound.src = soundSrcColor[1];
                text.innerText=fifityWordHello[0];
            }else if(temp == colorCon[1]){
                con.innerText = colorCon[2];
                sound.src = soundSrcColor[2];
                text.innerText=fifityWordHello[0];
            }else if(temp == colorCon[2]){
                con.innerText = colorCon[3];
                sound.src = soundSrcColor[3];
                text.innerText=fifityWordHello[0];
            }else if(temp == colorCon[3]){
                con.innerText = colorCon[4];
                sound.src = soundSrcColor[4];
                text.innerText=fifityWordHello[0];
            }else if(temp == colorCon[4]){
                con.innerText = colorCon[5];
                sound.src = soundSrcColor[5];
                text.innerText=fifityWordHello[0];
            }else if(temp == colorCon[5]){
                con.innerText = colorCon[6];
                sound.src = soundSrcColor[6];
                text.innerText=fifityWordHello[0];
            }else if(temp == colorCon[6]){
                con.innerText = colorCon[7];
                sound.src = soundSrcColor[7];
                text.innerText=fifityWordHello[0];
            }else if(temp == colorCon[7]){
                con.innerText = colorCon[8];
                sound.src = soundSrcColor[8];
                text.innerText=fifityWordHello[0];
            }else if(temp == colorCon[8]){
                con.innerText = colorCon[9];
                sound.src = soundSrcColor[9];
                text.innerText=fifityWordHello[0];
            }else if(temp == colorCon[9]){
                con.innerText = colorCon[0];
                sound.src = soundSrcColor[0];
                text.innerText="";
                show.style.display ='none';
                speaker.style.display='none';
                photo.style.display='none';
                closeBox.style.display='none';
                test.style.display='flex';
                let xhr = new XMLHttpRequest();
                xhr.onload=()=>{
                // alert(xhr.responseText);
                };
                let url = "./N5_dialouge_lesson_record_fine.php?lesson_id=13"
                xhr.open("get", url, true);
                xhr.send(null);
            }
            //待更新
            else if(temp == startCon[3]){
                con.innerText = eCon[0];
                sound.src = soundSrcE[0];
                text.innerText=fifityWordHello[0];
            }else if(temp == eCon[0]){
                con.innerText = eCon[1];
                sound.src = soundSrcE[1];
                text.innerText=fifityWordHello[0];
            }else if(temp == eCon[1]){
                con.innerText = eCon[2];
                sound.src = soundSrcE[2];
                text.innerText=fifityWordHello[0];
            }else if(temp == eCon[2]){
                con.innerText = eCon[3];
                sound.src = soundSrcE[3];
                text.innerText=fifityWordHello[0];
            }else if(temp == eCon[3]){
                con.innerText = eCon[4];
                sound.src = soundSrcE[4];
                text.innerText=fifityWordHello[0];
            }else if(temp == eCon[4]){
                con.innerText = eCon[5];
                sound.src = soundSrcE[5];
                text.innerText=fifityWordHello[0];
            }else if(temp == eCon[5]){
                con.innerText = eCon[6];
                sound.src = soundSrcE[6];
                text.innerText=fifityWordHello[0];
            }else if(temp == eCon[6]){
                con.innerText = eCon[7];
                sound.src = soundSrcE[7];
                text.innerText=fifityWordHello[0];
            }
            else if(temp == eCon[7]){
                con.innerText = eCon[0];
                sound.src = soundSrcE[0];
                text.innerText="";
                show.style.display ='none';
                speaker.style.display='none';
                photo.style.display='none';
                closeBox.style.display='none';
                test.style.display='flex';
                let xhr = new XMLHttpRequest();
                xhr.onload=()=>{
                // alert(xhr.responseText);
                };
                let url = "./N5_dialouge_lesson_record_nice.php?lesson_id=14"
                xhr.open("get", url, true);
                xhr.send(null);
            }
            //待更新
            else if(temp == startCon[4]){
                con.innerText = oCon[0];
                sound.src = soundSrcO[0];
                text.innerText=fifityWordHello[0];
            }else if(temp == oCon[0]){
                con.innerText = oCon[1];
                sound.src = soundSrcO[1];
                text.innerText=fifityWordHello[0];
            }else if(temp == oCon[1]){
                con.innerText = oCon[2];
                sound.src = soundSrcO[2];
                text.innerText=fifityWordHello[0];
            }else if(temp == oCon[2]){
                con.innerText = oCon[3];
                sound.src = soundSrcO[3];
                text.innerText=fifityWordHello[0];
            }else if(temp == oCon[3]){
                con.innerText = oCon[4];
                sound.src = soundSrcO[4];
                text.innerText=fifityWordHello[0];
            }else if(temp == oCon[4]){
                con.innerText = oCon[5];
                sound.src = soundSrcO[5];
                text.innerText=fifityWordHello[0];
            }else if(temp == oCon[5]){
                con.innerText = oCon[6];
                sound.src = soundSrcO[6];
                text.innerText=fifityWordHello[0];
            }else if(temp == oCon[6]){
                con.innerText = oCon[7];
                sound.src = soundSrcO[7];
                text.innerText=fifityWordHello[0];
            }else if(temp == oCon[7]){
                con.innerText = oCon[8];
                sound.src = soundSrcO[8];
                text.innerText=fifityWordHello[0];
            }else if(temp == oCon[8]){
                con.innerText = oCon[9];
                sound.src = soundSrcO[9];
                text.innerText=fifityWordHello[0];
            }else if(temp == oCon[9]){
                con.innerText = oCon[10];
                sound.src = soundSrcO[10];
                text.innerText=fifityWordHello[0];
            }else if(temp == oCon[10]){
                con.innerText = oCon[0];
                sound.src = soundSrcO[0];
                text.innerText="";
                show.style.display ='none';
                speaker.style.display='none';
                photo.style.display='none';
                closeBox.style.display='none';
                test.style.display='flex';
                let xhr = new XMLHttpRequest();
                xhr.onload=()=>{
                // alert(xhr.responseText);
                };
                let url = "./N5_dialouge_lesson_record_great.php?lesson_id=15"
                xhr.open("get", url, true);
                xhr.send(null);
            }
        }  
        function justPlay(e){
            sound.play();
            e.stopPropagation();//阻止冒泡事件
        }
        function shutDown(){
            filter.style.display='none';
            show.style.display ='none';
            speaker.style.display='none';
            photo.style.display='none';
            closeBox.style.display='none';
            hello.style.display="block";
            hi.style.display="block";
            nice.style.display="block";
            fine.style.display="block";
            great.style.display="block";
            let dialouge = JSON.parse(scorexhr.responseText);
            if(dialouge.length == 5){
            //加11
            npcHello.classList.add("studymap_hat");
            //加12
            npcHi.classList.add("studymap_hat");
            //加13
            npcFine.classList.add("studymap_hat");
            //加14
            npcNice.classList.add("studymap_hat");
            //加15
            npcGreat.classList.add("studymap_hat");
        }else if(dialouge.length == 4){
            if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 12 && dialouge[2].lesson_id == 13 && dialouge[3].lesson_id== 14){
                //加11
                npcHello.classList.add("studymap_hat");
                //加12
                npcHi.classList.add("studymap_hat");
                //加13
                npcFine.classList.add("studymap_hat");
                //加14
                npcNice.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 13 && dialouge[2].lesson_id == 14 && dialouge[3].lesson_id== 15){
                //加11
                npcHello.classList.add("studymap_hat");
                //加13
                npcFine.classList.add("studymap_hat");
                //加14
                npcNice.classList.add("studymap_hat");
                //加15
                npcGreat.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 12 && dialouge[2].lesson_id == 13 && dialouge[3].lesson_id== 15){
                //加11
                npcHello.classList.add("studymap_hat");
                //加12
                npcHi.classList.add("studymap_hat");
                //加13
                npcFine.classList.add("studymap_hat");
                //加15
                npcGreat.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 12  && dialouge[1].lesson_id == 13 && dialouge[2].lesson_id == 14 && dialouge[3].lesson_id== 15){
                //加12
                npcHi.classList.add("studymap_hat");
                //加13
                npcFine.classList.add("studymap_hat");
                //加14
                npcNice.classList.add("studymap_hat");;
                //加15
                npcGreat.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 12 && dialouge[2].lesson_id == 14 && dialouge[3].lesson_id== 15){
                //加11
                npcHello.classList.add("studymap_hat");
                //加12
                npcHi.classList.add("studymap_hat");
                //加14
                npcNice.classList.add("studymap_hat");;
                //加15
                npcGreat.classList.add("studymap_hat");
            }
        }else if(dialouge.length == 3){
            if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 12 && dialouge[2].lesson_id == 13){
                //加11
                npcHello.classList.add("studymap_hat");
                //加12
                npcHi.classList.add("studymap_hat");
                //加13
                npcFine.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 12 && dialouge[2].lesson_id == 14){
                //加11
                npcHello.classList.add("studymap_hat");
                //加12
                npcHi.classList.add("studymap_hat");
                //加14
                npcNice.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 12 && dialouge[2].lesson_id == 15){
                //加11
                npcHello.classList.add("studymap_hat");
                //加12
                npcHi.classList.add("studymap_hat");
                //加15
                npcGreat.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 13 && dialouge[2].lesson_id == 14){
                //加11
                npcHello.classList.add("studymap_hat");
                //加13
                npcFine.classList.add("studymap_hat");
                //加14
                npcNice.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 13 && dialouge[2].lesson_id == 15){
                //加11
                npcHello.classList.add("studymap_hat");
                //加13
                npcFine.classList.add("studymap_hat");
                //加15
                npcGreat.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 14 && dialouge[2].lesson_id == 15){
                //加11
                npcHello.classList.add("studymap_hat");
                //加14
                npcNice.classList.add("studymap_hat");
                //加15
                npcGreat.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 12  && dialouge[1].lesson_id == 13 && dialouge[2].lesson_id == 14){
                //加12
                npcHi.classList.add("studymap_hat");
                //加13
                npcFine.classList.add("studymap_hat");
                //加14
                npcNice.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 12  && dialouge[1].lesson_id == 14 && dialouge[2].lesson_id == 15){
                //加12
                npcHi.classList.add("studymap_hat");
                //加14
                npcNice.classList.add("studymap_hat");
                //加15
                npcGreat.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 13  && dialouge[1].lesson_id == 14 && dialouge[2].lesson_id == 15){
                //加13
                npcFine.classList.add("studymap_hat");
                //加14
                npcNice.classList.add("studymap_hat");
                //加15
                npcGreat.classList.add("studymap_hat");
            }; 
        }else if(dialouge.length == 2){
            if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 12){
                //加11
                npcHello.classList.add("studymap_hat");
                //加12
                npcHi.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 13){
                //加11
                npcHello.classList.add("studymap_hat");
                //加13
                npcFine.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 14){
                //加11
                npcHello.classList.add("studymap_hat");
                //加14
                npcNice.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 11  &&  dialouge[1].lesson_id == 15){
                console.log("78")
                //加11
                npcHello.classList.add("studymap_hat");
                //加15
                npcGreat.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 12  &&  dialouge[1].lesson_id == 13){
                //加12
                npcHi.classList.add("studymap_hat");
                //加13
                npcFine.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 12  && dialouge[1].lesson_id == 14){
                //加12
                npcHi.classList.add("studymap_hat");
                //加14
                npcNice.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 12  && dialouge[1].lesson_id == 15){
                //加12
                npcHi.classList.add("studymap_hat");
                //加15
                npcGreat.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 13  && dialouge[1].lesson_id == 14){
                //加13
                npcFine.classList.add("studymap_hat");
                //加14
                npcNice.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 13  && dialouge[1].lesson_id == 15){
                //加13
                npcFine.classList.add("studymap_hat");
                //加15
                npcGreat.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 14  && dialouge[1].lesson_id == 15){
                //加14
                npcNice.classList.add("studymap_hat");
                //加15
                npcGreat.classList.add("studymap_hat");
            };
        }else if(dialouge.length == 1){
            if(dialouge[0].lesson_id == 11){
                //加11
                npcHello.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 12){
                //加12
                npcHi.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 13){
                //加13
                npcFine.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 14){
                //加14
                npcNice.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 15){
                //加15
                npcGreat.classList.add("studymap_hat");
            }
        }else if(dialouge.length == 0){
           
        };  
        }
        function goToTest(e){
            window.location.href="test.html";
        }
        function cancelBox(){
            filter.style.display='none';
            test.style.display='none';
            hello.style.display="block";
            hi.style.display="block";
            nice.style.display="block";
            fine.style.display="block";
            great.style.display="block";
            let dialouge = JSON.parse(scorexhr.responseText);
            if(dialouge.length == 5){
            //加11
            npcHello.classList.add("studymap_hat");
            //加12
            npcHi.classList.add("studymap_hat");
            //加13
            npcFine.classList.add("studymap_hat");
            //加14
            npcNice.classList.add("studymap_hat");
            //加15
            npcGreat.classList.add("studymap_hat");
        }else if(dialouge.length == 4){
            if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 12 && dialouge[2].lesson_id == 13 && dialouge[3].lesson_id== 14){
                //加11
                npcHello.classList.add("studymap_hat");
                //加12
                npcHi.classList.add("studymap_hat");
                //加13
                npcFine.classList.add("studymap_hat");
                //加14
                npcNice.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 13 && dialouge[2].lesson_id == 14 && dialouge[3].lesson_id== 15){
                //加11
                npcHello.classList.add("studymap_hat");
                //加13
                npcFine.classList.add("studymap_hat");
                //加14
                npcNice.classList.add("studymap_hat");
                //加15
                npcGreat.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 12 && dialouge[2].lesson_id == 13 && dialouge[3].lesson_id== 15){
                //加11
                npcHello.classList.add("studymap_hat");
                //加12
                npcHi.classList.add("studymap_hat");
                //加13
                npcFine.classList.add("studymap_hat");
                //加15
                npcGreat.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 12  && dialouge[1].lesson_id == 13 && dialouge[2].lesson_id == 14 && dialouge[3].lesson_id== 15){
                //加12
                npcHi.classList.add("studymap_hat");
                //加13
                npcFine.classList.add("studymap_hat");
                //加14
                npcNice.classList.add("studymap_hat");;
                //加15
                npcGreat.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 12 && dialouge[2].lesson_id == 14 && dialouge[3].lesson_id== 15){
                //加11
                npcHello.classList.add("studymap_hat");
                //加12
                npcHi.classList.add("studymap_hat");
                //加14
                npcNice.classList.add("studymap_hat");;
                //加15
                npcGreat.classList.add("studymap_hat");
            }
        }else if(dialouge.length == 3){
            if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 12 && dialouge[2].lesson_id == 13){
                //加11
                npcHello.classList.add("studymap_hat");
                //加12
                npcHi.classList.add("studymap_hat");
                //加13
                npcFine.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 12 && dialouge[2].lesson_id == 14){
                //加11
                npcHello.classList.add("studymap_hat");
                //加12
                npcHi.classList.add("studymap_hat");
                //加14
                npcNice.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 12 && dialouge[2].lesson_id == 15){
                //加11
                npcHello.classList.add("studymap_hat");
                //加12
                npcHi.classList.add("studymap_hat");
                //加15
                npcGreat.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 13 && dialouge[2].lesson_id == 14){
                //加11
                npcHello.classList.add("studymap_hat");
                //加13
                npcFine.classList.add("studymap_hat");
                //加14
                npcNice.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 13 && dialouge[2].lesson_id == 15){
                //加11
                npcHello.classList.add("studymap_hat");
                //加13
                npcFine.classList.add("studymap_hat");
                //加15
                npcGreat.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 14 && dialouge[2].lesson_id == 15){
                //加11
                npcHello.classList.add("studymap_hat");
                //加14
                npcNice.classList.add("studymap_hat");
                //加15
                npcGreat.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 12  && dialouge[1].lesson_id == 13 && dialouge[2].lesson_id == 14){
                //加12
                npcHi.classList.add("studymap_hat");
                //加13
                npcFine.classList.add("studymap_hat");
                //加14
                npcNice.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 12  && dialouge[1].lesson_id == 14 && dialouge[2].lesson_id == 15){
                //加12
                npcHi.classList.add("studymap_hat");
                //加14
                npcNice.classList.add("studymap_hat");
                //加15
                npcGreat.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 13  && dialouge[1].lesson_id == 14 && dialouge[2].lesson_id == 15){
                //加13
                npcFine.classList.add("studymap_hat");
                //加14
                npcNice.classList.add("studymap_hat");
                //加15
                npcGreat.classList.add("studymap_hat");
            }; 
        }else if(dialouge.length == 2){
            if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 12){
                //加11
                npcHello.classList.add("studymap_hat");
                //加12
                npcHi.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 13){
                //加11
                npcHello.classList.add("studymap_hat");
                //加13
                npcFine.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 14){
                //加11
                npcHello.classList.add("studymap_hat");
                //加14
                npcNice.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 11  &&  dialouge[1].lesson_id == 15){
                console.log("78")
                //加11
                npcHello.classList.add("studymap_hat");
                //加15
                npcGreat.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 12  &&  dialouge[1].lesson_id == 13){
                //加12
                npcHi.classList.add("studymap_hat");
                //加13
                npcFine.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 12  && dialouge[1].lesson_id == 14){
                //加12
                npcHi.classList.add("studymap_hat");
                //加14
                npcNice.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 12  && dialouge[1].lesson_id == 15){
                //加12
                npcHi.classList.add("studymap_hat");
                //加15
                npcGreat.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 13  && dialouge[1].lesson_id == 14){
                //加13
                npcFine.classList.add("studymap_hat");
                //加14
                npcNice.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 13  && dialouge[1].lesson_id == 15){
                //加13
                npcFine.classList.add("studymap_hat");
                //加15
                npcGreat.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 14  && dialouge[1].lesson_id == 15){
                //加14
                npcNice.classList.add("studymap_hat");
                //加15
                npcGreat.classList.add("studymap_hat");
            };
        }else if(dialouge.length == 1){
            if(dialouge[0].lesson_id == 11){
                //加11
                npcHello.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 12){
                //加12
                npcHi.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 13){
                //加13
                npcFine.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 14){
                //加14
                npcNice.classList.add("studymap_hat");
            }else if(dialouge[0].lesson_id == 15){
                //加15
                npcGreat.classList.add("studymap_hat");
            }
        }else if(dialouge.length == 0){
           
        };  
        }
        function init(){
            cors()
            let imgs = document.getElementsByClassName('npc-img');
            let closeBox = document.getElementById('close');
            let goto =document.getElementById('Yes');
            let cancel =document.getElementById('No');
            for(let i=0;i<imgs.length; i++){
                imgs[i].onclick = showLightBox ;
            };
            show.addEventListener('click',conversation,false);
            speaker.addEventListener('click',justPlay,false);
            closeBox.addEventListener('click',shutDown,false);
            goto.addEventListener('click',goToTest,false);
            cancel.addEventListener('click',cancelBox,false);
        };
        window.addEventListener("load", init, false);
        </script>
    
    @@include('layout/footer.html')


    <!-- <script src="js/studymap.js"></script> -->
</body>
</html>


<!-- 撈資料庫的N5會話測驗紀錄資料 -->
<script>
    let npcHello = document.getElementById("sanHello");
    let npcHi = document.getElementById("sanHi");
    let npcFine = document.getElementById("sanFine");
    let npcNice = document.getElementById("sanNice");
    let npcGreat = document.getElementById("sanGreat");
    let scorexhr = new XMLHttpRequest();
    
    scorexhr.open("get", "./N5_dialouge_test.php", true);
    
    scorexhr.send(null);

    scorexhr.onload = function(){
        console.log(scorexhr.responseText);
        let dialouge = JSON.parse(scorexhr.responseText);
        
        if(dialouge.length == 5){
            //加11
            npcHello.classList.add("studymap_hat");
            npcHello.classList.remove("hover_hello");
            npcHello.classList.add("test_pass");
            //加12
            npcHi.classList.add("studymap_hat");
            npcHi.classList.remove("hover_hi");
            npcHi.classList.add("test_pass");
            //加13
            npcFine.classList.add("studymap_hat");
            npcFine.classList.remove("hover_fine");
            npcFine.classList.add("test_pass");
            //加14
            npcNice.classList.add("studymap_hat");
            npcNice.classList.remove("hover_nice");
            npcNice.classList.add("test_pass");
            //加15
            npcGreat.classList.add("studymap_hat");
            npcGreat.classList.remove("hover_great");
            npcGreat.classList.add("test_pass");
        }else if(dialouge.length == 4){
            if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 12 && dialouge[2].lesson_id == 13 && dialouge[3].lesson_id== 14){
                //加11
                npcHello.classList.add("studymap_hat");
                npcHello.classList.remove("hover_hello");
                npcHello.classList.add("test_pass");
                //加12
                npcHi.classList.add("studymap_hat");
                npcHi.classList.remove("hover_hi");
                npcHi.classList.add("test_pass");
                //加13
                npcFine.classList.add("studymap_hat");
                npcFine.classList.remove("hover_fine");
                npcFine.classList.add("test_pass");
                //加14
                npcNice.classList.add("studymap_hat");
                npcNice.classList.remove("hover_nice");
                npcNice.classList.add("test_pass");
            }else if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 13 && dialouge[2].lesson_id == 14 && dialouge[3].lesson_id== 15){
                //加11
                npcHello.classList.add("studymap_hat");
                npcHello.classList.remove("hover_hello");
                npcHello.classList.add("test_pass");
                //加13
                npcFine.classList.add("studymap_hat");
                npcFine.classList.remove("hover_fine");
                npcFine.classList.add("test_pass");
                //加14
                npcNice.classList.add("studymap_hat");
                npcNice.classList.remove("hover_nice");
                npcNice.classList.add("test_pass");
                //加15
                npcGreat.classList.add("studymap_hat");
                npcGreat.classList.remove("hover_great");
                npcGreat.classList.add("test_pass");
            }else if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 12 && dialouge[2].lesson_id == 13 && dialouge[3].lesson_id== 15){
                //加11
                npcHello.classList.add("studymap_hat");
                npcHello.classList.remove("hover_hello");
                npcHello.classList.add("test_pass");
                //加12
                npcHi.classList.add("studymap_hat");
                npcHi.classList.remove("hover_hi");
                npcHi.classList.add("test_pass");
                //加13
                npcFine.classList.add("studymap_hat");
                npcFine.classList.remove("hover_fine");
                npcFine.classList.add("test_pass");
                //加15
                npcGreat.classList.add("studymap_hat");
                npcGreat.classList.remove("hover_great");
                npcGreat.classList.add("test_pass");
            }else if(dialouge[0].lesson_id == 12  && dialouge[1].lesson_id == 13 && dialouge[2].lesson_id == 14 && dialouge[3].lesson_id== 15){
                //加12
                npcHi.classList.add("studymap_hat");
                npcHi.classList.remove("hover_hi");
                npcHi.classList.add("test_pass");
                //加13
                npcFine.classList.add("studymap_hat");
                npcFine.classList.remove("hover_fine");
                npcFine.classList.add("test_pass");
                //加14
                npcNice.classList.add("studymap_hat");
                npcNice.classList.remove("hover_nice");
                npcNice.classList.add("test_pass");
                //加15
                npcGreat.classList.add("studymap_hat");
                npcGreat.classList.remove("hover_great");
                npcGreat.classList.add("test_pass");
            }else if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 12 && dialouge[2].lesson_id == 14 && dialouge[3].lesson_id== 15){
                //加11
                npcHello.classList.add("studymap_hat");
                npcHello.classList.remove("hover_hello");
                npcHello.classList.add("test_pass");
                //加12
                npcHi.classList.add("studymap_hat");
                npcHi.classList.remove("hover_hi");
                npcHi.classList.add("test_pass");
                //加14
                npcNice.classList.add("studymap_hat");
                npcNice.classList.remove("hover_nice");
                npcNice.classList.add("test_pass");
                //加15
                npcGreat.classList.add("studymap_hat");
                npcGreat.classList.remove("hover_great");
                npcGreat.classList.add("test_pass");
            }
        }else if(dialouge.length == 3){
            if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 12 && dialouge[2].lesson_id == 13){
                //加11
                npcHello.classList.add("studymap_hat");
                npcHello.classList.remove("hover_hello");
                npcHello.classList.add("test_pass");
                //加12
                npcHi.classList.add("studymap_hat");
                npcHi.classList.remove("hover_hi");
                npcHi.classList.add("test_pass");
                //加13
                npcFine.classList.add("studymap_hat");
                npcFine.classList.remove("hover_fine");
                npcFine.classList.add("test_pass");
            }else if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 12 && dialouge[2].lesson_id == 14){
                //加11
                npcHello.classList.add("studymap_hat");
                npcHello.classList.remove("hover_hello");
                npcHello.classList.add("test_pass");
                //加12
                npcHi.classList.add("studymap_hat");
                npcHi.classList.remove("hover_hi");
                npcHi.classList.add("test_pass");
                //加14
                npcNice.classList.add("studymap_hat");
                npcNice.classList.remove("hover_nice");
                npcNice.classList.add("test_pass");
            }else if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 12 && dialouge[2].lesson_id == 15){
                //加11
                npcHello.classList.add("studymap_hat");
                npcHello.classList.remove("hover_hello");
                npcHello.classList.add("test_pass");
                //加12
                npcHi.classList.add("studymap_hat");
                npcHi.classList.remove("hover_hi");
                npcHi.classList.add("test_pass");
                //加15
                npcGreat.classList.add("studymap_hat");
                npcGreat.classList.remove("hover_great");
                npcGreat.classList.add("test_pass");
            }else if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 13 && dialouge[2].lesson_id == 14){
                //加11
                npcHello.classList.add("studymap_hat");
                npcHello.classList.remove("hover_hello");
                npcHello.classList.add("test_pass");
                //加13
                npcFine.classList.add("studymap_hat");
                npcFine.classList.remove("hover_fine");
                npcFine.classList.add("test_pass");
                //加14
                npcNice.classList.add("studymap_hat");
                npcNice.classList.remove("hover_nice");
                npcNice.classList.add("test_pass");
            }else if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 13 && dialouge[2].lesson_id == 15){
                //加11
                npcHello.classList.add("studymap_hat");
                npcHello.classList.remove("hover_hello");
                npcHello.classList.add("test_pass");
                //加13
                npcFine.classList.add("studymap_hat");
                npcFine.classList.remove("hover_fine");
                npcFine.classList.add("test_pass");
                //加15
                npcGreat.classList.add("studymap_hat");
                npcGreat.classList.remove("hover_great");
                npcGreat.classList.add("test_pass");
            }else if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 14 && dialouge[2].lesson_id == 15){
                //加11
                npcHello.classList.add("studymap_hat");
                npcHello.classList.remove("hover_hello");
                npcHello.classList.add("test_pass");
                //加14
                npcNice.classList.add("studymap_hat");
                npcNice.classList.remove("hover_nice");
                npcNice.classList.add("test_pass");
                //加15
                npcGreat.classList.add("studymap_hat");
                npcGreat.classList.remove("hover_great");
                npcGreat.classList.add("test_pass");
            }else if(dialouge[0].lesson_id == 12  && dialouge[1].lesson_id == 13 && dialouge[2].lesson_id == 14){
                //加12
                npcHi.classList.add("studymap_hat");
                npcHi.classList.remove("hover_hi");
                npcHi.classList.add("test_pass");
                //加13
                npcFine.classList.add("studymap_hat");
                npcFine.classList.remove("hover_fine");
                npcFine.classList.add("test_pass");
                //加14
                npcNice.classList.add("studymap_hat");
                npcNice.classList.remove("hover_nice");
                npcNice.classList.add("test_pass");
            }else if(dialouge[0].lesson_id == 12  && dialouge[1].lesson_id == 14 && dialouge[2].lesson_id == 15){
                //加12
                npcHi.classList.add("studymap_hat");
                npcHi.classList.remove("hover_hi");
                npcHi.classList.add("test_pass");
                //加14
                npcNice.classList.add("studymap_hat");
                npcNice.classList.remove("hover_nice");
                npcNice.classList.add("test_pass");
                //加15
                npcGreat.classList.add("studymap_hat");
                npcGreat.classList.remove("hover_great");
                npcGreat.classList.add("test_pass");
            }else if(dialouge[0].lesson_id == 13  && dialouge[1].lesson_id == 14 && dialouge[2].lesson_id == 15){
                //加13
                npcFine.classList.add("studymap_hat");
                npcFine.classList.remove("hover_fine");
                npcFine.classList.add("test_pass");
                //加14
                npcNice.classList.add("studymap_hat");
                npcNice.classList.remove("hover_nice");
                npcNice.classList.add("test_pass");
                //加15
                npcGreat.classList.add("studymap_hat");
                npcGreat.classList.remove("hover_great");
                npcGreat.classList.add("test_pass");
            }; 
        }else if(dialouge.length == 2){
            if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 12){
                //加11
                npcHello.classList.add("studymap_hat");
                npcHello.classList.remove("hover_hello");
                npcHello.classList.add("test_pass");
                //加12
                npcHi.classList.add("studymap_hat");
                npcHi.classList.remove("hover_hi");
                npcHi.classList.add("test_pass");
            }else if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 13){
                //加11
                npcHello.classList.add("studymap_hat");
                npcHello.classList.remove("hover_hello");
                npcHello.classList.add("test_pass");
                //加13
                npcFine.classList.add("studymap_hat");
                npcFine.classList.remove("hover_fine");
                npcFine.classList.add("test_pass");
            }else if(dialouge[0].lesson_id == 11  && dialouge[1].lesson_id == 14){
                //加11
                npcHello.classList.add("studymap_hat");
                npcHello.classList.remove("hover_hello");
                npcHello.classList.add("test_pass");
                //加14
                npcNice.classList.add("studymap_hat");
                npcNice.classList.remove("hover_nice");
                npcNice.classList.add("test_pass");
            }else if(dialouge[0].lesson_id == 11  &&  dialouge[1].lesson_id == 15){
                console.log("78")
                //加11
                npcHello.classList.add("studymap_hat");
                npcHello.classList.remove("hover_hello");
                npcHello.classList.add("test_pass");
                //加15
                npcGreat.classList.add("studymap_hat");
                npcGreat.classList.remove("hover_great");
                npcGreat.classList.add("test_pass");
            }else if(dialouge[0].lesson_id == 12  &&  dialouge[1].lesson_id == 13){
                //加12
                npcHi.classList.add("studymap_hat");
                npcHi.classList.remove("hover_hi");
                npcHi.classList.add("test_pass");
                //加13
                npcFine.classList.add("studymap_hat");
                npcFine.classList.remove("hover_fine");
                npcFine.classList.add("test_pass");
            }else if(dialouge[0].lesson_id == 12  && dialouge[1].lesson_id == 14){
                //加12
                npcHi.classList.add("studymap_hat");
                npcHi.classList.remove("hover_hi");
                npcHi.classList.add("test_pass");
                //加14
                npcNice.classList.add("studymap_hat");
                npcNice.classList.remove("hover_nice");
                npcNice.classList.add("test_pass");
            }else if(dialouge[0].lesson_id == 12  && dialouge[1].lesson_id == 15){
                //加12
                npcHi.classList.add("studymap_hat");
                npcHi.classList.remove("hover_hi");
                npcHi.classList.add("test_pass");
                //加15
                npcGreat.classList.add("studymap_hat");
                npcGreat.classList.remove("hover_great");
                npcGreat.classList.add("test_pass");
            }else if(dialouge[0].lesson_id == 13  && dialouge[1].lesson_id == 14){
                //加13
                npcFine.classList.add("studymap_hat");
                npcFine.classList.remove("hover_fine");
                npcFine.classList.add("test_pass");
                //加14
                npcNice.classList.add("studymap_hat");
                npcNice.classList.remove("hover_nice");
                npcNice.classList.add("test_pass");
            }else if(dialouge[0].lesson_id == 13  && dialouge[1].lesson_id == 15){
                console.log(999999999999999);
                //加13
                npcFine.classList.add("studymap_hat");
                npcFine.classList.remove("hover_fine");
                npcFine.classList.add("test_pass");
                //加15
                npcGreat.classList.add("studymap_hat");
                npcGreat.classList.remove("hover_great");
                npcGreat.classList.add("test_pass");
            }else if(dialouge[0].lesson_id == 14  && dialouge[1].lesson_id == 15){
                //加14
                npcNice.classList.add("studymap_hat");
                npcNice.classList.remove("hover_nice");
                npcNice.classList.add("test_pass");
                //加15
                npcGreat.classList.add("studymap_hat");
                npcGreat.classList.remove("hover_great");
                npcGreat.classList.add("test_pass");
            };
        }else if(dialouge.length == 1){
            if(dialouge[0].lesson_id == 11){
                //加11
                npcHello.classList.add("studymap_hat");
                npcHello.classList.remove("hover_hello");
                npcHello.classList.add("test_pass");
            }else if(dialouge[0].lesson_id == 12){
                //加12
                npcHi.classList.add("studymap_hat");
                npcHi.classList.remove("hover_hi");
                npcHi.classList.add("test_pass");
            }else if(dialouge[0].lesson_id == 13){
                //加13
                npcFine.classList.add("studymap_hat");
                npcFine.classList.remove("hover_fine");
                npcFine.classList.add("test_pass");
            }else if(dialouge[0].lesson_id == 14){
                //加14
                npcNice.classList.add("studymap_hat");
                npcNice.classList.remove("hover_nice");
                npcNice.classList.add("test_pass");
            }else if(dialouge[0].lesson_id == 15){
                //加15
                npcGreat.classList.add("studymap_hat");
                npcGreat.classList.remove("hover_great");
                npcGreat.classList.add("test_pass");
            }
        }else if(dialouge.length == 0){
                console.log(0)
        };
};
</script>
<script>
    function cors(){
        let backGI = document.getElementById("backGroundImg");
        let sunFace = document.getElementById("sunnyFace");
        let moon = document.getElementById("moonFace");
        let night = document.getElementById("nightFliter");
        let rainFogy = document.getElementById("foggy");
        var xhr = new XMLHttpRequest();
        xhr.onload = function(){
  	if(xhr.status == 200){
  		// console.log(xhr.responseText);
        let result = JSON.parse(xhr.responseText);
        let todayWeather = result.dataseries[0].weather;
        //取得現在時刻
        let rightNnow =new Date();
        console.log(rightNnow);
        let rightHour = rightNnow.getHours();
        console.log(rightHour);
        //取今日天氣資料
        console.log("今日天氣:",todayWeather);
        if(todayWeather == "ts"){
            if(rightHour <18 && rightHour >6){
                console.log("強對流天氣");
                console.log("白天");
                sunFace.style.display="block";
            }else if(rightHour <6 | rightHour >18){
                console.log("晚上");
                console.log("強對流天氣");
                moon.style.display="block";
                night.style.display="block";
            }; 
        }else if(todayWeather == "clear"){
            if(rightHour <18 && rightHour >6){
                console.log("晴天無雲");
                console.log("白天");
                sunFace.style.display="block";

            }else if(rightHour <6 | rightHour >18){
                console.log("晚上");
                console.log("晴天無雲");
                moon.style.display="block";
                night.style.display="block";
            }; 
        }else if(todayWeather == "mcloudy"){
            console.log("總雲量介於20%-80%間");
            backGI.style.backgroundImage="url('./images/studyMap_dialolv1_mcloudy.jpg')";
        }else if(todayWeather == "cloudy"){
            console.log("總雲量超過80%");
            backGI.style.backgroundImage="url('./images/studyMap_dialolv1_cloudy.jpg')";
        }else if(todayWeather == "rain"|todayWeather == "lightrain"){
            console.log("下雨");
            backGI.style.backgroundImage="url('./images/studyMap_dialolv1_rain.jpg')";
            rainFogy.style.display="block";
        }else if(todayWeather == "snow"){
            console.log("下雪");
        }else if(todayWeather == "tsrain"){
            console.log("抬升指數小於-5且有雨");
            backGI.style.backgroundImage="url('./images/studyMap_dialolv1_tsrain.jpg')";
            rainFogy.style.display="block";
        }
        //測試用
        // let test = "mcloudy";
        // if(test == "ts"){
        //     console.log("強對流天氣");
        //     sunFace.style.display="block";
        // }else if(test == "clear"){
        //     console.log("晴天無雲");
        //     sunFace.style.display="block";
        // }else if(test == "mcloudy"){
        //     console.log("總雲量介於20%-80%間");
        //     backGI.style.backgroundImage="url('./images/studyMap_dialolv1_mcloudy.jpg')";
        // }else if(test == "cloudy"){
        //     console.log("總雲量超過80%");
        //     backGI.style.backgroundImage="url('./images/studyMap_dialolv1_cloudy.jpg')";
        // }else if(test == "rain"){
        //     console.log("下雨");
        //     backGI.style.backgroundImage="url('./images/studyMap_dialolv1_rain.jpg')";
        //     rainFogy.style.display="block";
        // }else if(test == "snow"){
        //     console.log("下雪");
        // }else if(test == "tsrain"){
        //     console.log("抬升指數小於-5且有雨");
        //     backGI.style.backgroundImage="url('./images/studyMap_dialolv1_tsrain.jpg')";
        //     rainFogy.style.display="block";
        // }
  	}else{
  		alert(xhr.status);
  	}
  }
  //台灣一週天氣預報
  let url = "https://www.7timer.info/bin/civillight.php?lon=121.59&lat=25.10&ac=0&lang=en&unit=metric&output=json&tzshift=0";
  xhr.open("get", url, true);

  xhr.send(null); 

}
</script>