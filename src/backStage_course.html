<!DOCTYPE html>
<html lang="en">
<head>
    @@include('layout/meta.html', {
        "title" : "後台課程管理"
    })
</head>
<body class="backCourse backStyle" style="background-color: #fff;">
    <!-- header -->
    @@include('layout/backStage_header.html')
    <!-- header end -->

    <!-- 後台左右邊內容 -->
    <div id="backStageID" class="backStage_main_container">
        <div class="backStage_main_content">
            <!-- 後台左方選單 -->
            @@include('layout/backStage_nav.html')

            <div class="backStage_right_part">
                <div class="backStage_right_content">
                    <div class="backStage_right_title_part">
                        <div class="backStage_right_title">
                            <h1>課程管理</h1>
                        </div>
                        <div class="backStage_filter backStage_addAccount">
                            <button class="lightBox_btn" @click="show"><i class="bi bi-plus-lg"></i></i>新增課程</button>
                        </div>
                        <div class="backStage_input_filter">
                            <!-- <div class="on_stock">
                                <span>線上商品(2)</span>
                                <span>回收桶(0)</span>
                            </div> -->
                            <div class="input_filter">
                                <input type="text" placeholder="以課程編號查詢">
                                <i class="bi bi-search"></i>
                            </div>
                            <div class="backStage_search">
                                <button class="backStage_search_btn">
                                    查詢
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="backStage_right_table_part">
                        <table class="account_table_title table_title">
                            <tr class="table_header_row">
                                <th>課程編號</th>
                                <th>課程圖片</th>
                                <th>課程名稱</th>
                                <th>課程描述</th>
                                <th>課程價格</th>
                                <th>課程狀態</th>
                                <th></th>
                            </tr>
                            <tr class="table_data_row odd" v-for="lessonRow in lessonRows">
                                <td>{{lessonRow.lesson_id}}</td>
                                <td><img src="./images/payement_map.png" alt=""></td>
                                <td>{{lessonRow.lesson_name}}</td>
                                <td>{{lessonRow.lesson_info}}</td>
                                <td>{{lessonRow.lesson_price}}</td>
                                <td>{{lessonRow.lesson_status}}</td>
                                <td><button class="lightBox_btn edit_btn" @click="show">編輯課程</button></td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- 新增帳號燈箱 -->
            <div class="backStage_lightBox">
                <div class="backStage_lightBox_container">
                    <div class="backStage_lightBox_content">
                        <div class="backStage_lightBox_title">
                            <h3>新增課程</h3>
                        </div>
                        <div class="backStage_lightBox_close" @click="hide">
                            <i class="bi bi-x-lg"></i>
                        </div>
                        <div class="backStage_lightBox_main_content">
                            <form action="">
                                <!-- <div class="course_sm_block">
                                    <label for="course_sm">課程編號</label>
                                    <input type="text" id="course_sm">
                                </div> -->
                                <div class="course_img_block">
                                    <label for="course_img">課程圖片</label>
                                    <input type="file" id="course_img">
                                </div>
                                <div class="course_title_block">
                                    <label for="course_title">課程名稱</label>
                                    <input type="text" id="course_title">
                                </div>
                                <div class="course_descript_block">
                                    <label for="course_descript">課程描述</label>
                                    <input type="text" id="course_descript">
                                </div>
                                <div class="course_price_block">
                                    <label for="course_price">課程價格</label>
                                    <input type="text" id="course_price">
                                </div>
                                <div class="course_state_block">
                                    <label for="course_state">課程狀態</label>
                                    <select name="" id="course_state">
                                        <option value="active">上架</option>
                                        <option value="stop">下架</option>
                                    </select>
                                </div>
                            </form>
                        </div>
                        <div class="backStage_lightBox_saveBtn">
                            <button type="submit" class="data_save">儲存</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- @@include('layout/backStage_footer.html') -->
        </div>
    </div>

    <script>
        let backStage_lesson = new Vue({
            el:'#backStageID',
            data:{
                lessonRows:[]
            },
            methods: {
                show(){
                    document.querySelector('.backStage_lightBox').style.display = 'flex';
                },
                hide(){
                    document.querySelector('.backStage_lightBox').style.display = 'none';
                },
            },
            created(){
                let xhr = new XMLHttpRequest();
                xhr.onload = () =>{
                    this.lessonRows = JSON.parse(xhr.responseText);
                    console.log(this.lessonRows);
                }
                xhr.open("get","back_lesson.php",true);
                xhr.send(null);
            }
        })
    </script>

</body>
</html>