<!DOCTYPE html>
<html lang="en">
<head>
    @@include('layout/meta.html', {
        "title" : "50音新手村"
    })
</head>
<body class="map50Body">
    <!-- header -->

    @@include('layout/header.html')
    @@include('layout/login_register.html')
    <!-- header end -->
    <section class="bigMap">  
        <div class="studyMap_map village50">
            <!-- 人物角色 -->
            <div class="studyMap_npc asan left" >
                <img src="./images/studyMap_NPC_a.png" id="asan" class="npc-img">
            </div>
            <div class="studyMap_npc isan right" >
                <img src="./images/studyMap_NPC_i.png" id="isan" class="npc-img">
            </div>
            <div class="studyMap_npc usan right" >
                <img src="./images/studyMap_NPC_u.png" id="usan" class="npc-img">
            </div>
            <div class="studyMap_npc esan left" >
                <img src="./images/studyMap_NPC_e.png" id="esan" class="npc-img">
            </div>
            <div class="studyMap_npc osan right" >
                <img src="./images/studyMap_NPC_o.png" id="osan" class="npc-img">
            </div>
            <!-- 圖像框 -->
            <div class="studyMap_main" id="mapMain">
                <!-- <img id="main_pic" src=""> -->
                <p id="main_text"></p>
            </div>
            <!-- 對話框 -->
            <div class="studyMap_con" id="mapCon">
                <p id="con"></p>
                <div class="fix-item">
                    <div id="sound">
                        <img  src="./images/icon_speaker.png">
                    </div>
                    <audio id="voice">
                    <source = src="" type="audio/mp3">
                    </audio>
                    <div class="npc-pic">
                        <img id="pic" src="">
                    </div>
                </div>
            </div>
            <!-- 背景濾鏡 -->
            <div class="studyMap_fliter" id="mapFliter"></div>
            <!-- 關閉按鈕 -->
            <div class="quit" id="close"></div>
            <!-- 前往測驗對話框 -->
            <div class="go-to-test" id="toTest">
                <div class="ask">
                    <p>前往測驗</p>
                </div>
                <div class="yes" id="Yes">
                    <button>確認</button>
                </div>
                <div class="no" id="No">
                    <button>先不要</button>
                </div>
            </div>
             <!-- 木板告示 -->
            <div class="item">
                <img src="./images/studyMap_guide1.png">
            </div>
        </div>
        <script>
            // let npcId =new Array('asan','isan','usan','esan','osan')
            //==========對話招呼============
            let startCon = new Array('你好，我是あ，今天一起來學習50音的母音あ段吧!','本大爺是い，學習母音い段的事，就交給我吧!','初次見面，我是う，快來學習50音的母音う段，GO!!','嘿嘿嘿，我是え...一起來學...50音え段...','我是お~今天一起來學習50音的母音お段~~' );
            //==========對話框人像============
            let npcSrc = new Array('./images/studyMap_NPC_a.png','./images/studyMap_NPC_i.png','./images/studyMap_NPC_u.png','./images/studyMap_NPC_e.png','./images/studyMap_NPC_o.png' );
             //==========對話============
            let aCon = new Array("首先教學的是「あ」發音為「a」","再來是「か」，發音為「ka」","再來是「さ」，發音為「sa」","再來是「た」，發音為「ta」","再來是「な」，發音為「na」","再來是「は」，發音為「ha」","再來是「ま」，發音為「ma」","再來是「や」，發音為「ya」","再來是「ら」，發音為「ra」","再來是「わ」，發音為「wa」");
            let iCon = new Array("首先教學的是「い」發音為「i」","再來是「き」，發音為「ki」","再來是「し」，發音為「shi」","再來是「ち」，發音為「chi」","再來是「に」，發音為「ni」","再來是「ひ」，發音為「hi」","再來是「み」，發音為「mi」","再來是「り」，發音為「ri」");
            let uCon = new Array("首先教學的是「う」發音為「u」","再來是「く」，發音為「ku」","再來是「す」，發音為「su」","再來是「つ」，發音為「tsu」","再來是「ぬ」，發音為「nu」","再來是「ふ」，發音為「fu」","再來是「む」，發音為「mu」","再來是「ゆ」，發音為「yu」","再來是「る」，發音為「ru」");
            let eCon = new Array("首先...「え」發音為「e」...","...「け」，發音為「ke」...","...「せ」，發音為「se」...","...「て」，發音為「te」...","...「ね」，發音為「ne」...","...「へ」，發音為「he」...","...「め」，發音為「me」...","...「れ」，發音為「re」...");
            let oCon = new Array("首先教學的是「お」發音為「o」","再來是「こ，發音為「ko」","再來是「そ」，發音為「so」","再來是「と」，發音為「to」","再來是「の」，發音為「no」","再來是「ほ」，發音為「ho」","再來是「も」，發音為「mo」","再來是「よ」，發音為「yo」","再來是「ろ」，發音為「ro」","再來是「を」，發音為「wo」","最後一個是鼻音「ん」，發音為「n」");
            //===========聲音檔路徑===========
            let soundSrcA = new Array("./sound/a.mp3","./sound/ka.mp3","./sound/sa.mp3","./sound/ta.mp3","./sound/na.mp3","./sound/ha.mp3","./sound/ma.mp3","./sound/ya.mp3","./sound/ra.mp3","./sound/wa.mp3");
            let soundSrcI = new Array("./sound/i.mp3","./sound/ki.mp3","./sound/shi.mp3","./sound/chi.mp3","./sound/ni.mp3","./sound/hi.mp3","./sound/mi.mp3","./sound/ri.mp3");
            let soundSrcU = new Array("./sound/u.mp3","./sound/ku.mp3","./sound/su.mp3","./sound/tsu.mp3","./sound/nu.mp3","./sound/fu.mp3","./sound/mu.mp3","./sound/yu.mp3","./sound/ru.mp3");
            let soundSrcE = new Array("./sound/e.mp3","./sound/ke.mp3","./sound/se.mp3","./sound/te.mp3","./sound/ne.mp3","./sound/he.mp3","./sound/me.mp3","./sound/re.mp3");
            let soundSrcO = new Array("./sound/o.mp3","./sound/ko.mp3","./sound/so.mp3","./sound/to.mp3","./sound/no.mp3","./sound/ho.mp3","./sound/mo.mp3","./sound/yo.mp3","./sound/ro.mp3","./sound/wo.mp3","./sound/n.mp3");
              //==========圖像檔路徑==============
            // let fifityPicA = new Array("./images/studyMap_a.svg","./images/studyMap_ka.svg","./images/studyMap_sa.svg","./images/studyMap_ta.svg","./images/studyMap_na.svg","./images/studyMap_ha.svg","./images/studyMap_ma.svg","./images/studyMap_ya.svg","./images/studyMap_ra.svg","./images/studyMap_wa.svg");//10
            // let fifityPicI = new Array("./images/studyMap_i.svg","./images/studyMap_ki.svg","./images/studyMap_shi.svg","./images/studyMap_chi.svg","./images/studyMap_ni.svg","./images/studyMap_hi.svg","./images/studyMap_mi.svg","./images/studyMap_ri.svg");//8
            // let fifityPicU = new Array("./images/studyMap_u.svg","./images/studyMap_ku.svg","./images/studyMap_su.svg","./images/studyMap_tsu.svg","./images/studyMap_nu.svg","./images/studyMap_fu.svg","./images/studyMap_mu.svg","./images/studyMap_yu.svg","./images/studyMap_ru.svg");//9
            // let fifityPicE = new Array("./images/studyMap_e.svg","./images/studyMap_ke.svg","./images/studyMap_se.svg","./images/studyMap_te.svg","./images/studyMap_ne.svg","./images/studyMap_he.svg","./images/studyMap_me.svg","./images/studyMap_re.svg");//8
            // let fifityPicO = new Array("./images/studyMap_o.svg","./images/studyMap_ko.svg","./images/studyMap_so.svg","./images/studyMap_to.svg","./images/studyMap_no.svg","./images/studyMap_ho.svg","./images/studyMap_mo.svg","./images/studyMap_yo.svg","./images/studyMap_ro.svg","./images/studyMap_wo.svg","./images/studyMap_n.svg");//11
            //===============圖像框文字============
            let fifityWordA = new Array("あ","か","さ","た","な","は","ま","や","ら","わ");//10
            let fifityWordI = new Array("い","き","し","ち","に","ひ","み","り");//8
            let fifityWordU = new Array("う","く","す","つ","ぬ","ふ","む","ゆ","る");//9
            let fifityWordE = new Array("え","け","せ","て","ね","へ","め","れ");//8
            let fifityWordO = new Array("お","こ","そ","と","の","ほ","も","よ","ろ","を","ん");//11
            //=========================
            let show = document.getElementById('mapCon');
            let speaker = document.getElementById('sound');
            let photo = document.getElementById('mapMain');
            // let fifty = document.getElementById('main_pic');
            let text = document.getElementById('main_text');
            let con = document.getElementById('con');
            let sound = document.getElementById('voice');
            let test = document.getElementById('toTest');
            let filter = document.getElementById('mapFliter');
            let closeBox = document.getElementById('close');
            let pic = document.getElementById('pic');
            let asan = document.getElementById('asan');
            let isan = document.getElementById('isan');
            let usan = document.getElementById('usan');
            let esan = document.getElementById('esan');
            let osan = document.getElementById('osan');
        function showLightBox(e){
            //背景變暗
            filter.style.display='block';
            show.style.display ='flex';
            closeBox.style.display='block';
            asan.style.display="none";
            isan.style.display="none";
            usan.style.display="none";
            esan.style.display="none";
            osan.style.display="none";
            //====法1抓陣列ID======================
            // let id = String(e.target.id)
            // let index = npcId.indexOf(id)
            // let pic = document.getElementById('PIC')
            // let con = document.getElementById('CON')
            // con.innerText = startCon[index]
            // pic.src=npcSrc[index]
            //==========法2========================
            let target = e.target.getAttribute('id');
                if(target =='asan'){
                    con.innerText = startCon[0];
                    pic.src = npcSrc[0];
                }else if(target =='isan'){
                    con.innerText = startCon[1];
                    pic.src = npcSrc[1];
                }else if(target =='usan'){
                    con.innerText = startCon[2];
                    pic.src = npcSrc[2];
                }else if(target =='esan'){
                    con.innerText = startCon[3];
                    pic.src = npcSrc[3];
                }else if(target =='osan'){
                    con.innerText = startCon[4];
                    pic.src = npcSrc[4];
                }
        }
        function conversation(){
            speaker.style.display='flex';
            photo.style.display='flex';
            let temp = show.innerText.trim();
            //あ
            if(temp == startCon[0]){
                con.innerText = aCon[0];
                sound.src = soundSrcA[0];
                // fifty.src = fifityPicA[0];
                text.innerText=fifityWordA[0];
            }else if(temp == aCon[0]){
                con.innerText = aCon[1];
                sound.src = soundSrcA[1];
                // fifty.src = fifityPicA[1];
                text.innerText=fifityWordA[1];
            }else if(temp == aCon[1]){
                con.innerText = aCon[2];
                sound.src = soundSrcA[2];
                // fifty.src = fifityPicA[2];
                text.innerText=fifityWordA[2];
            }else if(temp == aCon[2]){
                con.innerText = aCon[3];
                sound.src = soundSrcA[3];
                // fifty.src = fifityPicA[3];
                text.innerText=fifityWordA[3];
            }else if(temp == aCon[3]){
                con.innerText = aCon[4];
                sound.src = soundSrcA[4];
                // fifty.src = fifityPicA[4];
                text.innerText=fifityWordA[4];
            }else if(temp == aCon[4]){
                con.innerText = aCon[5];
                sound.src = soundSrcA[5];
                // fifty.src = fifityPicA[5];
                text.innerText=fifityWordA[5];
            }else if(temp == aCon[5]){
                con.innerText = aCon[6];
                sound.src = soundSrcA[6];
                // fifty.src = fifityPicA[6];
                text.innerText=fifityWordA[6];
            }else if(temp == aCon[6]){
                con.innerText = aCon[7];
                sound.src = soundSrcA[7];
                // fifty.src = fifityPicA[7];
                text.innerText=fifityWordA[7];
            }else if(temp == aCon[7]){
                con.innerText = aCon[8];
                sound.src = soundSrcA[8];
                // fifty.src = fifityPicA[8];
                text.innerText=fifityWordA[8];
            }else if(temp == aCon[8]){
                con.innerText = aCon[9];
                sound.src = soundSrcA[9];
                // fifty.src = fifityPicA[9];
                text.innerText=fifityWordA[9];
            }else if(temp == aCon[9]){
                con.innerText = aCon[0];
                sound.src = soundSrcA[0];
                // fifty.src = fifityPicA[0];
                text.innerText="";
                show.style.display ='none';
                speaker.style.display='none';
                photo.style.display='none';
                closeBox.style.display='none';
                toTest.style.display='flex';
            }
            //い
            else if(temp == startCon[1]){
                con.innerText = iCon[0];
                sound.src = soundSrcI[0];
                text.innerText=fifityWordI[0];
            }else if(temp == iCon[0]){
                con.innerText = iCon[1];
                sound.src = soundSrcI[1];
                text.innerText=fifityWordI[1];
            }else if(temp == iCon[1]){
                con.innerText = iCon[2];
                sound.src = soundSrcI[2];
                text.innerText=fifityWordI[2];
            }else if(temp == iCon[2]){
                con.innerText = iCon[3];
                sound.src = soundSrcI[3];
                text.innerText=fifityWordI[3];
            }else if(temp == iCon[3]){
                con.innerText = iCon[4];
                sound.src = soundSrcI[4];
                text.innerText=fifityWordI[4];
            }else if(temp == iCon[4]){
                con.innerText = iCon[5];
                sound.src = soundSrcI[5];
                text.innerText=fifityWordI[5];
            }else if(temp == iCon[5]){
                con.innerText = iCon[6];
                sound.src = soundSrcI[6];
                text.innerText=fifityWordI[6];
            }else if(temp == iCon[6]){
                con.innerText = iCon[7];
                sound.src = soundSrcI[7];
                text.innerText=fifityWordI[7];
            }else if(temp == iCon[7]){
                con.innerText = iCon[0];
                sound.src = soundSrcI[0];
                text.innerText="";
                show.style.display ='none';
                speaker.style.display='none';
                photo.style.display='none';
                closeBox.style.display='none';
                test.style.display='flex';
            }
            //う
            else if(temp == startCon[2]){
                con.innerText = uCon[0];
                sound.src = soundSrcU[0];
                text.innerText=fifityWordU[0];
            }else if(temp == uCon[0]){
                con.innerText = uCon[1];
                sound.src = soundSrcU[1];
                text.innerText=fifityWordU[1];
            }else if(temp == uCon[1]){
                con.innerText = uCon[2];
                sound.src = soundSrcU[2];
                text.innerText=fifityWordU[2];
            }else if(temp == uCon[2]){
                con.innerText = uCon[3];
                sound.src = soundSrcU[3];
                text.innerText=fifityWordU[3];
            }else if(temp == uCon[3]){
                con.innerText = uCon[4];
                sound.src = soundSrcU[4];
                text.innerText=fifityWordU[4];
            }else if(temp == uCon[4]){
                con.innerText = uCon[5];
                sound.src = soundSrcU[5];
                text.innerText=fifityWordU[5];
            }else if(temp == uCon[5]){
                con.innerText = uCon[6];
                sound.src = soundSrcU[6];
                text.innerText=fifityWordU[6];
            }else if(temp == uCon[6]){
                con.innerText = uCon[7];
                sound.src = soundSrcU[7];
                text.innerText=fifityWordU[7];
            }else if(temp == uCon[7]){
                con.innerText = uCon[8];
                sound.src = soundSrcU[8];
                text.innerText=fifityWordU[8];
            }else if(temp == uCon[8]){
                con.innerText = uCon[0];
                sound.src = soundSrcU[0];
                text.innerText='';
                show.style.display ='none';
                speaker.style.display='none';
                photo.style.display='none';
                closeBox.style.display='none';
                test.style.display='flex';;
            }
            //え
            else if(temp == startCon[3]){
                con.innerText = eCon[0];
                sound.src = soundSrcE[0];
                text.innerText=fifityWordE[0];
            }else if(temp == eCon[0]){
                con.innerText = eCon[1];
                sound.src = soundSrcE[1];
                text.innerText=fifityWordE[1];
            }else if(temp == eCon[1]){
                con.innerText = eCon[2];
                sound.src = soundSrcE[2];
                text.innerText=fifityWordE[2];
            }else if(temp == eCon[2]){
                con.innerText = eCon[3];
                sound.src = soundSrcE[3];
                text.innerText=fifityWordE[3];
            }else if(temp == eCon[3]){
                con.innerText = eCon[4];
                sound.src = soundSrcE[4];
                text.innerText=fifityWordE[4];
            }else if(temp == eCon[4]){
                con.innerText = eCon[5];
                sound.src = soundSrcE[5];
                text.innerText=fifityWordE[5];
            }else if(temp == eCon[5]){
                con.innerText = eCon[6];
                sound.src = soundSrcE[6];
                text.innerText=fifityWordE[6];
            }else if(temp == eCon[6]){
                con.innerText = eCon[7];
                sound.src = soundSrcE[7];
                text.innerText=fifityWordE[7];
            }
            else if(temp == eCon[7]){
                con.innerText = eCon[0];
                sound.src = soundSrcE[0];
                text.innerText="";
                show.style.display ='none';
                speaker.style.display='none';
                photo.style.display='none';
                closeBox.style.display='none';
                test.style.display='flex';;
            }
            //お
            else if(temp == startCon[4]){
                con.innerText = oCon[0];
                sound.src = soundSrcO[0];
                text.innerText=fifityWordO[0];
            }else if(temp == oCon[0]){
                con.innerText = oCon[1];
                sound.src = soundSrcO[1];
                text.innerText=fifityWordO[1];
            }else if(temp == oCon[1]){
                con.innerText = oCon[2];
                sound.src = soundSrcO[2];
                text.innerText=fifityWordO[2];
            }else if(temp == oCon[2]){
                con.innerText = oCon[3];
                sound.src = soundSrcO[3];
                text.innerText=fifityWordO[3];
            }else if(temp == oCon[3]){
                con.innerText = oCon[4];
                sound.src = soundSrcO[4];
                text.innerText=fifityWordO[4];
            }else if(temp == oCon[4]){
                con.innerText = oCon[5];
                sound.src = soundSrcO[5];
                text.innerText=fifityWordO[5];
            }else if(temp == oCon[5]){
                con.innerText = oCon[6];
                sound.src = soundSrcO[6];
                text.innerText=fifityWordO[6];
            }else if(temp == oCon[6]){
                con.innerText = oCon[7];
                sound.src = soundSrcO[7];
                text.innerText=fifityWordO[7];
            }else if(temp == oCon[7]){
                con.innerText = oCon[8];
                sound.src = soundSrcO[8];
                text.innerText=fifityWordO[8];
            }else if(temp == oCon[8]){
                con.innerText = oCon[9];
                sound.src = soundSrcO[9];
                text.innerText=fifityWordO[9];
            }else if(temp == oCon[9]){
                con.innerText = oCon[10];
                sound.src = soundSrcO[10];
                text.innerText=fifityWordO[10];
            }else if(temp == oCon[10]){
                con.innerText = oCon[0];
                sound.src = soundSrcO[0];
                text.innerText="";
                show.style.display ='none';
                speaker.style.display='none';
                photo.style.display='none';
                closeBox.style.display='none';
                test.style.display='flex';
            }
        }  
        function justPlay(e){
            sound.play();
            e.stopPropagation();//阻止冒泡事件
        }
        function shutDown(){
            filter.style.display='none';
            show.style.display ='none';
            speaker.style.display='none';
            photo.style.display='none';
            closeBox.style.display='none';
            asan.style.display="block";
            isan.style.display="block";
            usan.style.display="block";
            esan.style.display="block";
            osan.style.display="block";
        }
        function goToTest(e){
            window.location.href="test.html";
        }
        function cancelBox(){
            filter.style.display='none';
            test.style.display='none';
            asan.style.display="block";
            isan.style.display="block";
            usan.style.display="block";
            esan.style.display="block";
            osan.style.display="block";
        }
        function init(){
            let imgs = document.getElementsByClassName('npc-img');
            let closeBox = document.getElementById('close');
            let goto =document.getElementById('Yes');
            let cancel =document.getElementById('No');
            for(let i=0;i<imgs.length; i++){
                imgs[i].onclick = showLightBox ;
            };
            show.addEventListener('click',conversation,false);
            speaker.addEventListener('click',justPlay,false);
            closeBox.addEventListener('click',shutDown,false);
            goto.addEventListener('click',goToTest,false);
            cancel.addEventListener('click',cancelBox,false);
        };
        window.addEventListener("load", init, false);
        </script>
    </section>
     @@include('layout/footer.html')
</body>
</html>
